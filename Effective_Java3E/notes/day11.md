# Day 11. 일반적인 프로그래밍 원칙 Part 1. / Item 57~63

---
---

## Item 57. 지역변수의 범위를 최소화하라.

- 기본적으로 "클래스와 멤버의 접근 권한을 최소화하라"고 한 아이템 15와 취지가 비슷하다.
- 지역변수의 유효 범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고 오류가능성은 낮아진다.
- 지역변수의 범위를 줄이는 가장 강력한 기법은 역시 "가장 처음 쓰일 때 선언하기"다.
- 모든 지역 변수는 선언과 동시에 초기화 해야한다.
- 초기화에 필요한 정보가 충분하지 않다면 충분해질 때까지 선언을 미뤄야한다. (try -catch 문은 예외다)
- 반복 변수의 값을 반복문이 종료된 뒤에도 써야하는 상황이 아니라면 while 문보다는 for 문을 쓰는 편이 낫다.
- 메서드를 작게 유지하고 한 가지 기능에 집중한다.

---
---

## Item 58.전통적인 for 문보다는 for-each 문을 사용하라.

### 핵심 정리

- 전통적인 for 문과 비교했을 때 for-each 문은 명료하고, 유연하고, 버그를 예방해준다.
- 성능 저하도 없다. 가능한 모든 곳에소 for 문이 아닌 for each 문을 사용하자.

---
---

## Item 59. 라이브러리를 익히고 사용하라.

- 표준 라이브러리를 사용하면 그 코드를 작성한 전문가의 지식과 여러분보다 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다.

### 핵심 정리

- 바퀴를 다시 발명하지 말자. (do not reinvent the wheel)
- 아주 특별한 나만의 기능이 아니라면 누군가 이미 라이브러리 형태로 구현해놓았을 가능성이 크다.
- 그런 라이브러리가 있다면, 쓰면 된다.
- 있는지 잘 모르겠다면 찾아보라. 일반적으로 라이브러리의 코드는 여러분이 직접 작성한 것보다 품질이 좋고, 점차 개선될 가능성이 크다.
- 코드 품질에도 규모의 경제가 적용된다. 즉, 라이브러리 코드는 개발자 각자가 작성하는 것보다 주목을 훨씬 많이 받으므로 코드 품질도 그만큼 높아진다.

---
---

## Item 60. 정확한 답이 필요하다면 float와 double은 피하라.

- float 과 double 타입은 특히 금융 관련 계산과는 맞지 않는다.0.1 혹읜 10의 음의 거듭제곱 수를 표현할 수 없기 때문이다.
- 금융계산에는 BigDecimal, int 혹은 long을 사용해야 한다.'

### 핵심 정리

- 정확한 답이 필요한 계산에는 float 과 double을 피하라.
- 소수점 추적은 시스템에 맡기고, 코딩 시의 불편함이나 성능 저하를 신경쓰지 않겠다면 BigDecimal을 사용하라. BigDecimal이 제공하는 여덟가지 반올림 모드를 이용하여 반올림을 환벽히 제어할 수 있다.
- 법으로 정해진 반올림을 수행해야 하는 비즈니스 계산에서 아주 편리한 기능이다.
- 반면, 성능이 중요하고 소수점을 직접 추적할 수 있고 숫자가 너무 크지 않다면 int 나 long을 사용하라.
- when to use...
    - 숫자를 아홉자리 십진수로 표현할 수 있다면 int를 사용하고,
    - 열여덟 자리 십진수로 표현할 수 있다면 long을 사용하라.
    - 열여덟자리를 넘어가면 BigDecimal 을 사용해야 한다.

---
---

## Item 61. 박싱된 기본 타입보다는 기본 타입을 사용하라.

- 자바의 데이터 타입은 기본 타입과 참조 타입이 있다.
- 각 기본 타입은 대웅하는 박싱된 기본 타입을 가지고 있다. int의 Integer가 예다.
- 기본 타입과 박싱된 기본 타입의 주된 차이점은
    -
        1. 기본 타입은 값만 가지고 있으나, 박싱된 기본 타입은 값에 더해 식별성이란 속성을 갖는다.

        - 즉, 박싱된 기본 타입의 두 인스턴스는 값이 같아도 다를 수가 있다.
    -
        2. 기본 타입의 값은 언제나 유효하지만 박싱된 기본타입은 유효하지 않은 값, 즉 null을 가질 수 있다.
    -
        3. 기본 타입이 박싱된 기본 타입보다 시간과 메모리 사용면에서 더 효율적이다.
- 박싱된 기본 타입에 == 연산자를 사용하면 오류가 일어난다.
- 기본 타입과 박싱된 기본 타입을 혼용한 연산에서는 박싱된 기본 타입의 박싱이 자동으로 풀린다.
    - 아래 프로그램의 실수는 sum을 박싱된 기본 타입으로 선언하여 박싱과 언박싱이 반복해서 일어나 성능이 저하되는 것이다.

```java
    public static void main(String[]args){
        Long sum=0L;
        for(long i=0;i<=Integer.MAX_VALUE;i++){
        sum+=i;
        }
        System.out.println(sum);
        }
```

- 박싱된 기본 타입은 언제 사용해야 하는가?
    1. 첫 번재, 컬렉션의 원소, 키, 값으로 쓴다.
    2. 컬렉션은 기본 타입을 담을 수 없으므로 어쩔 수 없이 박싱된 기본 타입을 써야 한다.

### 핵심 정리

- 기본 타입과 박싱된 기본 타입 중 하나를 선택해야 한다면 가능하면 기본 타입을 사용하라.
- 기본 타입은 간단하고 빠르다. 박싱된 기본 타입을 써야 한다면 주의를 기울이자.
- 오토박싱이 박싱된 기본 타입을 사용할 때의 번거로움을 줄여주지만, 그 위험까지 없애주지는 않는다.
- 두 박싱된 기본 타입을 == 연산자로 비교한다면 식별성 비교가 이뤄지는데, 이는 여러분이 원한게 아닐 가능성이 크다.
- 같은 연산에서 기본 타입과 박싱된 기본타입을 혼용하면 언박싱이 이뤄지며, 언 박싱 과정에서 NullPointerException을 던질 수 있다.
- 마지막으로 기본 타입을 박싱하는 작업은 필요 없는 객체를 생성하는 부작용을 나을 수 있다. k

---
---

## Item 62 다른 타입이 적절하다면 문자열 사용을 피하라.

- 문자열은 다른 값 타입을 대신하기에 적절하지 않다.
    - 입력받을 데이터가 진짜 문자열일 때만 그렇게 하는게 좋다. 받은 데이터가 수치형이라면 int, float, BigInteger 등 적당한 수치 타입으로 변환해야 한다. 기본 타입이든 참조 타입이든 적절한
      타입이 있다면 그것을 사용하고, 없다면 새로 하나 작성해라.
- 문자열은 권한을 표현하기에 적합하지 않다
    - 여러 요소가 혼합된 데이터를 하나의 문자열로 표현하는 것은 대체로 좋지 않은 생각이다.
    - 각 요소를 개별로 접근하려면 문자열을 파싱해야 해서 느리고, 귀찮고, 오류 가능성도 커진다.
    - 적절한 eqauls toString compareTo 메서드를 제공할 수 없으며, String이 제공하는 기능에만 의존해야 한다.
    - 그래서 차라리 전용 클래스를 새로 만드는 편이 낫다.
- 문자열은 권한을 표현하기에 적합하지 않다.
    - 에를들어 두개의 스레드가 같은 고유키를 공유한다던가, 악의적으로 클라이언트가 같은 고유키를 지정한다면 문제가 발생한다.

### 핵심 정리

- 더 적합한 데이터 타입이 있거나 새로 작성할 수 잇다면 문자열을 쓰고 싶은 유혹을 뿌리쳐라.
- 문자열은 잘못 사용함녀 번거롭고, 덜 유연하고, 느리고, 오류 가능성도 크다.
- 문자열을 잘못 사용하는 흔한 예로는 기본 타입, 열거 타입, 혼합 타입이 있다.

---
---

## Item 63 문자열 연결은 느리니 주의하라.

- 문자열 연결 연산자로 문자열 n 개를 잇는 시간은 n^2 에 비례한다.
    - 문자열은 불변이라서 두 문자열을 연결할 경우 양쪽의 내용을 모두 복사해야 하므로 성능 저하는 피할 수 없는 결과다.
- 성능을 포기하고 싶지 않다면 String 대신 StringBuilder를 사용하자.

### 핵심 정리

- 원칙은 간단하다. 성능에 신경 써야 한다면 많은 문자열을 연결할 대는 문자열 연결 연산자(+)를 피하자.
- 대신 StringBuilder의 append 메서드를 사용하라.
- 문자 배열을 사용하거나, 문자열을 (연결하지 않고) 하나씩 처리하는 방법도 있다.

---
